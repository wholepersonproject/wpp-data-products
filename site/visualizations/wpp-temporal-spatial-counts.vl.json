{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://wholepersonproject.github.io/wpp-data-products/reports/validation/wpp-temporal-spatial-counts.csv"
  },
  "width": "container",
  "height": "container",
  "padding": {
    "left": 100,
    "right": 10
  },
  "config": {
    "font": "Metropolis",
    "axis": {
      "labelFontSize": 14,
      "titleFontSize": 14,
      "titleFontWeight": 500,
      "labelFontWeight": 500,
      "titleLineHeight": 21,
      "labelLineHeight": 21,
      "titleColor": "#201E3D",
      "labelColor": "#4B4B5E",
      "titlePadding": 30
    },
    "legend": {
      "labelFontSize": 14,
      "titleFontSize": 14,
      "titleLineHeight": 21,
      "titleColor": "#201E3D",
      "labelColor": "#4B4B5E",
      "titleFontWeight": 500,
      "labelFontWeight": 500
    },
    "range": {
      "category": {
        "scheme": "category10"
      }
    }
  },
  "params": [
    {
      "name": "group_by",
      "value": "<all tables combined>",
      "bind": {
        "input": "select",
        "options": [
          "<all tables combined>",
          "cardiovascular-system",
          "dental-and-craniofacial-system",
          "digestive-system",
          "endocrine-system",
          "fascia-system",
          "female-reproductive-system",
          "immune-and-lymphatic-system",
          "integumentary-system",
          "male-reproductive-system",
          "muscular-system",
          "nervous-system",
          "pulmonary-system",
          "skeletal-system",
          "urinary-system"
        ],
        "name": "WPP Table: "
      }
    }
  ],
  "mark": {
    "type": "point",
    "tooltip": true,
    "filled": true,
    "stroke": "#808080",
    "strokeWidth": 0.5,
    "fillOpacity": 0.7
  },
  "transform": [
    {
      "filter": "group_by === '<all tables combined>' || datum.table === group_by"
    }
  ],
  "encoding": {
    "x": {
      "field": "effector_scale",
      "type": "nominal",
      "title": "Spatial Scale",
      "axis": {
        "labelAngle": -45,
        "labelExpr": "upper(slice(datum.label, 0, 1)) + slice(datum.label, 1)"
      }
    },
    "y": {
      "field": "time_scale",
      "type": "nominal",
      "title": "Time Range",
      "axis": {
        "labelAngle": 0,
        "labelExpr": "upper(slice(datum.label, 0, 1)) + slice(datum.label, 1)"
      }
    },
    "size": {
      "aggregate": "sum",
      "field": "process_count",
      "type": "quantitative",
      "title": "# Processes"
    },
    "color": {
      "aggregate": "sum",
      "field": "process_count",
      "type": "quantitative",
      "title": "# Processes",
      "scale": {
        "scheme": "yellowgreen"
      }
    }
  }
}
